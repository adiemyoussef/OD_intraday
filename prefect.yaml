# Welcome to your prefect.yaml file! You can use this file for storing and managing
# configuration for deploying your flows. We recommend committing this file to source
# control along with your flow code.

# Generic metadata about this project
name: OptionsDepth_intraday
prefect-version: 2.19.8

# build section allows you to manage and build docker images
build:

# push section allows you to manage if and how this project is uploaded to remote locations
push:

# the deployments section allows you to provide configuration for deploying flows
deployments:
- name: paperspace_deploy_prod
  version:
  tags: []
  description: "\n    This flow processes intraday financial data for options trading.\n\
    \    It performs the following main steps:\n    1. Loads the initial book of contracts\n\
    \    2. Fetches historical poly data\n    3. Processes the latest message from
    the queue\n    4. Retrieves and verifies SFTP file data\n    5. Builds the latest
    book with updated contract information\n    6. Updates the book with the latest
    Greeks values\n    7. Filters out invalid entries and logs the results\n    8.
    Acknowledges the processed message in RabbitMQ\n\n    The flow handles various
    edge cases and exceptions, ensuring robust\n    data processing and connection
    management throughout its execution.\n    "
  entrypoint: prefect_flow/prefect_tasks.py:Intraday_Flow
  parameters: {}
  work_pool:
    name: intraday-paperspace-agent
    work_queue_name:
    job_variables: {}
  schedules:
  - cron: 0,10,20,30,40,50,0,10,20 8-16 * * 1-5
    timezone: America/New_York
    day_or: true
    active: true
  - cron: 20 20 * * 0-5
    timezone: America/New_York
    day_or: true
    active: true
  - cron: 0 17 * * 0-5
    timezone: America/New_York
    day_or: true
    active: true
  - cron: 0 18 * * 0-5
    timezone: America/New_York
    day_or: true
    active: true
  - cron: '*/10 0-16 * * 0-5'
    timezone: America/New_York
    day_or: true
    active: true
  storage:
    type: github
    repository: https://github.com/adiemyoussef/OD_intraday.git
    reference: dev_test
    access_token:
      token:
  pull:
  - prefect.deployments.steps.git_clone:
      repository: https://github.com/adiemyoussef/OD_intraday.git
      branch: dev_test
      access_token: '{{ prefect.blocks.github-credentials.my-github-credentials }}'

- name: 0 DTE Flow
  entrypoint: charting/intraday_beta_v2.py:zero_dte_flow
  work_pool:
    name: intraday-paperspace-agent
    work_queue_name:
    job_variables: {}
  schedules:
  - cron: 4,14,24,34,44,54 7-16 * * 1-5
    timezone: America/New_York
    day_or: true
    active: true
  - cron: 10 17,18 * * 1-5
    timezone: America/New_York
    day_or: true
    active: true
  storage:
    type: github
    repository: https://github.com/adiemyoussef/OD_intraday.git
    reference: dev_test
    access_token:
      token:
  pull:
  - prefect.deployments.steps.git_clone:
      repository: https://github.com/adiemyoussef/OD_intraday.git
      branch: dev_test
      access_token: '{{ prefect.blocks.github-credentials.my-github-credentials }}'
  version:
  tags: []
  description:
  parameters: {}

- name: 1 DTE Flow
  entrypoint: charting/intraday_beta_v2.py:one_dte_flow
  work_pool:
    name: intraday-paperspace-agent
    work_queue_name:
    job_variables: {}
  schedules:
  - cron: 4,14,24,34,44,54 7-16 * * 1-5
    timezone: America/New_York
    day_or: true
    active: true
  - cron: 10 17,18 * * 1-5
    timezone: America/New_York
    day_or: true
    active: true
  storage:
    type: github
    repository: https://github.com/adiemyoussef/OD_intraday.git
    reference: dev_test
    access_token:
      token:
  pull:
  - prefect.deployments.steps.git_clone:
      repository: https://github.com/adiemyoussef/OD_intraday.git
      branch: dev_test
      access_token: '{{ prefect.blocks.github-credentials.my-github-credentials }}'
  version:
  tags: []
  description:
  parameters: {}

- name: MM GEX Flow
  entrypoint: charting/intraday_beta_v2.py:GEX_flow
  work_pool:
    name: intraday-paperspace-agent
    work_queue_name:
    job_variables: {}
  schedules:
  - cron: 4,14,24,34,44,54 7-16 * * 1-5
    timezone: America/New_York
    day_or: true
    active: true
  - cron: 10 17,18 * * 1-5
    timezone: America/New_York
    day_or: true
    active: true
  storage:
    type: github
    repository: https://github.com/adiemyoussef/OD_intraday.git
    reference: dev_test
    access_token:
      token:
  pull:
  - prefect.deployments.steps.git_clone:
      repository: https://github.com/adiemyoussef/OD_intraday.git
      branch: dev_test
      access_token: '{{ prefect.blocks.github-credentials.my-github-credentials }}'
  version:
  tags: []
  description:
  parameters: {}

- name: MM GEX Flow- All exp
  entrypoint: charting/intraday_beta_v2.py:all_GEX_flow
  work_pool:
    name: intraday-paperspace-agent
    work_queue_name:
    job_variables: {}
  schedules:
  - cron: 4,14,24,34,44,54 7-16 * * 1-5
    timezone: America/New_York
    day_or: true
    active: true
  - cron: 10 17,18 * * 1-5
    timezone: America/New_York
    day_or: true
    active: true
  storage:
    type: github
    repository: https://github.com/adiemyoussef/OD_intraday.git
    reference: dev_test
    access_token:
      token:
  pull:
  - prefect.deployments.steps.git_clone:
      repository: https://github.com/adiemyoussef/OD_intraday.git
      branch: dev_test
      access_token: '{{ prefect.blocks.github-credentials.my-github-credentials }}'
  version:
  tags: []
  description:
  parameters: {}


- name: Depthview Flow
  entrypoint: charting/intraday_beta_v2.py:plot_depthview
  work_pool:
    name: intraday-paperspace-agent
    work_queue_name:
    job_variables: {}
  schedules:
  - cron: 4,14,24,34,44,54 7-16 * * 1-5
    timezone: America/New_York
    day_or: true
    active: true
  - cron: 10 17,18 * * 1-5
    timezone: America/New_York
    day_or: true
    active: true
  storage:
    type: github
    repository: https://github.com/adiemyoussef/OD_intraday.git
    reference: dev_test
    access_token:
      token:
  pull:
  - prefect.deployments.steps.git_clone:
      repository: https://github.com/adiemyoussef/OD_intraday.git
      branch: dev_test
      access_token: '{{ prefect.blocks.github-credentials.my-github-credentials }}'
  version:
  tags: []
  description:
  parameters: {}

- name: Gather Options Chain
  entrypoint: prefect_flow/gather_options_chains.py:poly_flow
  work_pool:
    name: intraday-paperspace-agent
    work_queue_name:
    job_variables: {}
  schedules:
  - cron: '*/5 4-23 * * 1-5'
    timezone: America/New_York
    day_or: true
    active: true
  storage:
    type: github
    repository: https://github.com/adiemyoussef/OD_intraday.git
    reference: dev_test
    access_token:
      token:
  pull:
  - prefect.deployments.steps.git_clone:
      repository: https://github.com/adiemyoussef/OD_intraday.git
      branch: dev_test
      access_token: '{{ prefect.blocks.github-credentials.my-github-credentials }}'
  version:
  tags: []
  description:
  parameters: {}

- name: Generate Heatmap
  entrypoint: heatmaps_simulation/heatmap_task.py:heatmap_generation_flow
  work_pool:
    name: intraday-paperspace-agent
    work_queue_name:
    job_variables: {}
  schedules:
  - cron: '*/30 4-23 * * 1-5'
    timezone: America/New_York
    day_or: true
    active: true
  storage:
    type: github
    repository: https://github.com/adiemyoussef/OD_intraday.git
    reference: dev_test
    access_token:
      token:
  pull:
  - prefect.deployments.steps.git_clone:
      repository: https://github.com/adiemyoussef/OD_intraday.git
      branch: dev_test
      access_token: '{{ prefect.blocks.github-credentials.my-github-credentials }}'
  version:
  tags: []
  description:
  parameters: {}


- name: Trigger Gif Flows
  entrypoint: prefect_flow/prefect_tasks.py:trigger_gif_flows
  work_pool:
    name: intraday-paperspace-agent
    work_queue_name:
    job_variables: {}
  storage:
    type: github
    repository: https://github.com/adiemyoussef/OD_intraday.git
    reference: dev_test
    access_token:
      token:
  pull:
  - prefect.deployments.steps.git_clone:
      repository: https://github.com/adiemyoussef/OD_intraday.git
      branch: dev_test
      access_token: '{{ prefect.blocks.github-credentials.my-github-credentials }}'
  version:
  tags: []
  description:
  parameters: {}
  schedules:
  - interval: 3600.0
    anchor_date: '2024-09-23T15:29:12.842778+00:00'
    timezone: UTC
    active: false

#--------------- MySQL ----------------- #
- name: Revised Book - MySQL
  entrypoint: prefect_flow/daily_generate_mm_book_intraday.py:generate_revised_book
  work_pool:
    name: intraday-paperspace-agent
    work_queue_name:
    job_variables: {}
  schedules:
  - cron: 30 2 * * 2-6
    timezone: America/New_York
    day_or: true
    active: true
  storage:
    type: github
    repository: https://github.com/adiemyoussef/OD_intraday.git
    reference: dev_test
    access_token:
      token:
  pull:
  - prefect.deployments.steps.git_clone:
      repository: https://github.com/adiemyoussef/OD_intraday.git
      branch: dev_test
      access_token: '{{ prefect.blocks.github-credentials.my-github-credentials }}'
  version:
  tags: []
  description: "\n    Generate the official start of day book\n    "
  parameters: {}



#-------------- Stage ----------------- #
- name: Revised Book - Stage
  entrypoint: prefect_flow/flow_dailybook_stage.py:generate_revised_book
  work_pool:
    name: intraday-paperspace-agent
    work_queue_name:
    job_variables: {}
  schedules:
  - cron: 30 2 * * 2-6
    timezone: America/New_York
    day_or: true
    active: true
  storage:
    type: github
    repository: https://github.com/adiemyoussef/OD_intraday.git
    reference: dev_test
    access_token:
      token:
  pull:
  - prefect.deployments.steps.git_clone:
      repository: https://github.com/adiemyoussef/OD_intraday.git
      branch: dev_test
      access_token: '{{ prefect.blocks.github-credentials.my-github-credentials }}'
  version:
  tags: []
  description: "\n    Generate the official start of day book\n    "
  parameters: {}

#-------------- PROD---------------#
- name: Revised Book - Prod
  entrypoint: prefect_flow/flow_dailybook_prod.py:generate_revised_book
  work_pool:
    name: intraday-paperspace-agent
    work_queue_name:
    job_variables: {}
  schedules:
  - cron: 30 2 * * 2-6
    timezone: America/New_York
    day_or: true
    active: true
  storage:
    type: github
    repository: https://github.com/adiemyoussef/OD_intraday.git
    reference: dev_test
    access_token:
      token:
  pull:
  - prefect.deployments.steps.git_clone:
      repository: https://github.com/adiemyoussef/OD_intraday.git
      branch: dev_test
      access_token: '{{ prefect.blocks.github-credentials.my-github-credentials }}'
  version:
  tags: []
  description: "\n    Generate the official start of day book for prod environment\n    "
  parameters: {}
